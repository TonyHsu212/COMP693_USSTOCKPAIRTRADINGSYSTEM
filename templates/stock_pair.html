{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}

<div class="d-flex gap-3 vh-100">
    <!-- Sidebar -->
    <nav class="sidebar bg-light vh-120 p-3">
        <div class="sidebar-header mb-4">
            <h5>US Stock Pair Trading System</h5>
        </div>
        <form class="mb-3">
            <input type="search" class="form-control" placeholder="Search...">
        </form>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link text-dark" href="{{ url_for('pairanalyze.analyze_pair_page') }}">
                    <i class="bi bi-cash-coin me-2" ></i> Stock Pair
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="{{ url_for('pair.stock_pairs') }}"><i class="bi bi-cash-coin me-2"></i> Pair Trading</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Strategies</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Backtest</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Risk Management</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Account Settle</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Trading Detail</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="#"><i class="bi bi-cash-coin me-2"></i> Notifications</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="{{ url_for('auth.logout') }}"><i class="bi bi-box-arrow-left me-2"></i> Logout</a>
            </li>
        </ul>
    </nav>

    <main class="p-4 flex-grow-1 bg-light">
        <body>
            <h1>Stock Pair Analysis</h1>
<!--            <form action="{{ url_for('pairanalyze.analyze_stock_pair') }}" method="POST" id="stockForm">-->
<!--                <label for="stock1">Stock Symbol 1:</label>-->
<!--                <input type="text" id="stock1" name="stock1" required><br><br>-->

<!--                <label for="stock2">Stock Symbol 2:</label>-->
<!--                <input type="text" id="stock2" name="stock2" required><br><br>-->

<!--                <label for="period">Period:</label>-->
<!--                <select id="period" name="period" required>-->
<!--                    <option value="1d">1 day</option>-->
<!--                    <option value="5d">5 day</option>-->
<!--                    <option value="1wk">1 week</option>-->
<!--                    <option value="1mo">1 month</option>-->
<!--                    <option value="3mo">3 month</option>-->
<!--                    <option value="6mo">6 month</option>-->
<!--                    <option value="1y">1 Year</option>-->
<!--                    <option value="2y">2 year</option>-->
<!--                    <option value="5y">5 year</option>-->
<!--                    <option value="1ytd">till now</option>-->
<!--                    <option value="max">Max</option>-->
<!--                </select><br><br>-->

<!--                <label for="interval">Interval:</label>-->
<!--                <select id="interval" name="interval" required>-->
<!--                    <option value="1m">1 min</option>-->
<!--                    <option value="2m">2 min</option>-->
<!--                    <option value="5m">5 min</option>-->
<!--                    <option value="15m">15 min</option>-->
<!--                    <option value="30m">30 min</option>-->
<!--                    <option value="60m">60 min</option>-->
<!--                    <option value="1d">1 Day</option>-->
<!--                    <option value="5d">5 day</option>-->
<!--                    <option value="1wk">1 week</option>-->
<!--                    <option value="1m">1 month</option>-->
<!--                </select><br><br>-->

<!--                <button type="submit" name="analyze">Analyze</button>-->
<!--            </form>-->

            <form action="{{ url_for('pairanalyze.analyze_stock_pair') }}" method="POST" id="stockForm" class="d-flex flex-wrap gap-3 align-items-center">
                <!-- First Row -->
                <div class="d-flex gap-3 flex-wrap">
                    <div>
                        <label for="stock1">Stock1:</label>
                        <input type="text" id="stock1" name="stock1" required>
                    </div>
                    <div>
                        <label for="stock2">Stock2:</label>
                        <input type="text" id="stock2" name="stock2" required>
                    </div>
                    <div>
                        <label for="period">Period:</label>
                        <select id="period" name="period" required>
                            <option value="1d">1 day</option>
                            <option value="5d">5 day</option>
                            <option value="1wk">1 week</option>
                            <option value="1mo">1 month</option>
                            <option value="3mo">3 month</option>
                            <option value="6mo">6 month</option>
                            <option value="1y">1 Year</option>
                            <option value="2y">2 year</option>
                            <option value="5y">5 year</option>
                            <option value="1ytd">till now</option>
                            <option value="max">Max</option>
                        </select>
                    </div>
                    <div>
                        <label for="interval">Interval:</label>
                        <select id="interval" name="interval" required>
                            <option value="1m">1 min</option>
                            <option value="2m">2 min</option>
                            <option value="5m">5 min</option>
                            <option value="15m">15 min</option>
                            <option value="30m">30 min</option>
                            <option value="60m">60 min</option>
                            <option value="1d">1 Day</option>
                            <option value="5d">5 day</option>
                            <option value="1wk">1 week</option>
                            <option value="1m">1 month</option>
                        </select>
                    </div>
                </div>
                <!-- Second Row -->
                <div class="d-flex gap-3 flex-wrap">
                    <div class="align-self-end">
                        <button type="submit" name="analyze" class="btn btn-primary">Analyze</button>
                    </div>
                </div>
            </form>


<!--            <h2>Analysis Results</h2>-->
<!--            <p>Correlation: <span id="correlation">{{ result['correlation'] }}</span></p>-->
<!--            <p>P-Value: <span id="pValue">{{ result['pValue'] }}</span></p>-->
            <h2>Analysis Results</h2>
            <div class="d-flex gap-3 align-items-center">
                <p>Correlation: <span id="correlation">{{ result['correlation'] }}</span></p>
                <p>P-Value: <span id="pValue">{{ result['pValue'] }}</span></p>
            </div>


            <h3 class="mt-4">Spread Chart</h3>
            <div class="text-center">
                {% if plot_data %}
                    <img src="data:image/png;base64,{{ plot_data }}" class="img-fluid" alt="Spread Chart">
                {% else %}
                    <p>No chart available.</p>
                {% endif %}
            </div>


        </body>
    </main>
</div>

{% endblock %}
